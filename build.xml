<?xml version="1.0" encoding="UTF-8"?>
<project default="xar" name="HWH-WebApp" basedir="../WeGA-WebApp" xmlns:unless="ant:unless">
    
    <!-- import default properties from file -->
    <!--    <property file="local.build.properties"/>-->
        <property file="../hwh-webapp/build.properties"/>
    
    <!-- Import build script for building WeGA-WebApp -->
    <import file="../WeGA-WebApp/build.xml" as="wega" prefixseparator=":"/>
    
    <!-- build WeGA-WebApp and get package and unzip it to local dist dir -->
    <target name="build-wega-pkg" depends="wega:xar">
        <unzip src="build/WeGA-WebApp-4.4.0.xar" dest="../hwh-webapp/dist"/>
    </target>
    
    <!-- build hwh-webapp -->
    <target name="build-hwh-specs">
        <copy todir="../hwh-webapp/dist-hwhSpecs/">
            <fileset dir="../hwh-webapp/data/">
                <include name="**/*.*"/>
            </fileset>
        </copy>
        <!-- build sass -->
        <!--<target name="sass" depends="init">
            <description>Create CSS files via sass</description>
            <exec executable="${sass.cmd}">
                <arg line="resources/sass/main.scss ${dist.dir}/resources/css/styles.css"/>
            </exec>
            <!-\- <exec executable="${sass.cmd}">
            <arg line="resources/sass/swagger.scss ${dist.dir}/resources/css/swagger.css"/>
            </exec> -\->
        </target>-->
    </target>
    
    <!-- override WeGA-WebApp with hwh-webapp -->
    <target name="update-dist" depends="build-wega-pkg, build-hwh-specs">
        <copy todir="../hwh-webapp/dist" overwrite="yes">
            <fileset dir="../hwh-webapp/dist-hwhSpecs">
            <include name="**/*.*"/>
        </fileset>
        </copy>
    </target>
    
    <!-- make package -->
    <target name="xar" depends="update-dist">
       <zip destfile="../hwh-webapp/build/${project.app}-${project.version}.xar">
           <fileset dir="../hwh-webapp/dist"/>
       </zip>
    </target>
</project>
